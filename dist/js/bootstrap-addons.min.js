angular.module("BootstrapAddons",["BootstrapAddonsTemplateCache"]),angular.module("BootstrapAddons").directive("timeslider",["$document","$timeout",function(t,e){return{restrict:"E",scope:{end:"=",onClear:"&",onChange:"&",start:"=",ticks:"@",width:"@"},templateUrl:"timeslider/timeslider.html",replace:!0,link:function(t,n,a){function i(){e(g.extent()[0].getTime()===g.extent()[1].getTime()?function(){t.onClear()()}:function(){t.onChange()(g.extent()[0],g.extent()[1])})}function r(t,e){g.extent([t,e]),g(d3.select(".brush")),g.event(d3.select(".brush"))}function s(){t.actionIcon="glyphicon-play",p&&(clearInterval(p),p=null)}function l(){t.actionIcon="glyphicon-pause",p=setInterval(function(){t.stepForward()},1e3)}function c(){var e=g.extent()[1].getTime()-g.extent()[0].getTime();return 0>=e&&(e=(t.end.getTime()-t.start.getTime())/45),e}var o=d3.time.scale.utc().domain([t.start.getTime(),t.end.getTime()]).range([0,parseInt(t.width,10)]),d=d3.select("#timeslider");o.ticks(parseInt(t.ticks,10)).forEach(function(t,e){if(d.append("line").attr("class","scaleLine").attr("x1",o(t)).attr("x2",o(t)).attr("y1",0).attr("y2",22),e%2!=0){var n=t.getUTCHours();10>n&&(n="0"+n),d.append("text").attr("class","scaleLabel").attr("x",o(t)).attr("dx","-1.25em").attr("y",11).attr("text-anchor","left").attr("dominant-baseline","middle").text(n);var a=t.getUTCMinutes();10>a&&(a="0"+a),d.append("text").attr("class","scaleLabel").attr("x",o(t)).attr("dx","0.25em").attr("y",11).attr("text-anchor","right").attr("dominant-baseline","middle").text(a)}});var g=d3.svg.brush().x(o).on("brushend",i);d.append("g").attr("class","brush").call(g).selectAll("rect").attr("height",22),t.actionIcon="glyphicon-play";var p=null;t.togglePlay=function(){p?s():l()},t.stepBack=function(){var e=new Date(g.extent()[0].getTime()-c()),n=g.extent()[0];n.getTime()<=t.start.getTime()&&(e=new Date(t.end.getTime()-c()),n=t.end),r(e,n)},t.stepForward=function(){var e=g.extent()[1],n=new Date(g.extent()[1].getTime()+c());e.getTime()>=t.end.getTime()&&(e=t.start,n=new Date(t.start.getTime()+c())),r(e,n)}}}}]),angular.module("BootstrapAddonsTemplateCache",[]).run(["$templateCache",function(t){t.put("timeslider/timeslider.html",'<div><div class="btn-group"><button class="btn btn-xs btn-primary" ng-click="togglePlay()"><span class="glyphicon {{actionIcon}}"></span></button> <button class="btn btn-xs btn-primary" ng-click="stepBack()"><span class="glyphicon glyphicon-step-backward"></span></button> <button class="btn btn-xs btn-primary" ng-click="stepForward()"><span class="glyphicon glyphicon-step-forward"></span></button><svg id="timeslider" ng-attr-width="{{width}}" height="22"><g><rect x="0" y="0" ng-attr-width="{{width}}" height="22" class="timeslider"></rect></g></svg></div></div>')}]);